%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% LaTeX Template: Beamer arrows
%
% Source: http://www.texample.net/
% Feel free to distribute this template, but please keep the
% referal to TeXample.net.
% Date: Nov 2006
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% How to use writeLaTeX: 
%
% You edit the source code here on the left, and the preview on the
% right shows you the result within a few seconds.
%
% Bookmark this page and share the URL with your co-authors. They can
% edit at the same time!
%
% You can upload figures, bibliographies, custom classes and
% styles using the files menu.
%
% If you're new to LaTeX, the wikibook is a great place to start:
% http://en.wikibooks.org/wiki/LaTeX
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{beamer} %
\usetheme{CambridgeUS}
\usepackage[latin1]{inputenc}
\usefonttheme{professionalfonts}
\usepackage[authoryear]{natbib}
\usepackage{times}
\usepackage{amsmath}
\usepackage{verbatim}
\usepackage[absolute,overlay]{textpos}
\usepackage{graphicx}

\usepackage{tikz}
\usetikzlibrary{shapes,shapes.geometric,arrows,fit,calc,positioning,automata,}
\usetikzlibrary{arrows.meta}
\tikzset{%
	>={Latex[width=2mm,length=2mm]},
	% Specifications for style of nodes:
	base/.style = {rectangle, rounded corners, draw=black,
		minimum width=3cm, minimum height=1cm,
		text centered, font=\sffamily},
	baselong/.style = {rectangle, rounded corners, draw=black,
		minimum width=6cm, minimum height=1cm,
		text centered, font=\sffamily},
	processNextflow/.style = {base, fill=blue!30},
	processNextflowLong/.style = {baselong, fill=blue!30},
	shellparallel/.style = {base, minimum width=2.5cm, fill=red!30,
		font=\ttfamily},
	activityRuns/.style = {base, fill=green!30},
	process/.style = {base, minimum width=2.5cm, fill=orange!15,
		font=\ttfamily},
}
\def\checkmark{\tikz\fill[scale=0.4](0,.35) -- (.25,0) -- (1,.7) -- (.25,.15) -- cycle;}
\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\newenvironment{customlegend}[1][]{%
    \begingroup
    % inits/clears the lists (which might be populated from previous
    % axes):
    \csname pgfplots@init@cleared@structures\endcsname
    \pgfplotsset{#1}%
}{%
    % draws the legend:
    \csname pgfplots@createlegend\endcsname
    \endgroup
}%

% makes \addlegendimage available (typically only available within an
% axis environment):
\def\addlegendimage{\csname pgfplots@addlegendimage\endcsname}

\setbeamercolor{framesource}{fg=gray}
\setbeamerfont{framesource}{size=\tiny}

\newcommand{\source}[1]{\begin{textblock*}{5cm}(7.7cm,8.6cm)
    \begin{beamercolorbox}[ht=0.5cm,right]{framesource}
        \usebeamerfont{framesource}\usebeamercolor[fg]{framesource} Source: {#1}
    \end{beamercolorbox}
\end{textblock*}}

\newcommand{\norm}[1]{\left\lVert#1\right\rVert}

\makeatother
\setbeamertemplate{footline}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
    \usebeamerfont{author in head/foot}\insertshortauthor
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.4\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
    \usebeamerfont{title in head/foot}\insertshorttitle\hspace*{3em}
  \end{beamercolorbox}
  \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,right]{date and frame number in head/foot}%
    \insertdate \quad \insertframenumber{} / \inserttotalframenumber\hspace*{1ex}
  \end{beamercolorbox}}%
  \vskip0pt%
}
\makeatletter
\setbeamertemplate{navigation symbols}{}

\author[Ditz, Hanssen, Sp\"{a}th]{Jonas Ditz, Friederike Hanssen, Julian Sp\"{a}th}
\title[TSS Prediction Workflow]{Integrated Workflow for Automated Transcription Start Site Prediction in Prokaryotes}
\institute{Data Management in Quantitative Biology\\ Dr. Sven Nahnsen\\ Sven Fillinger\\ University of T\"{u}bingen}

\begin{document}

\begin{comment}
:Title: Beamer arrows
:Tags: Remember picture, Beamer, Physics & chemistry, Overlays
:Use page: 3

With PGF/TikZ version 1.09 and later, it is possible to draw paths between nodes across
different pictures. This is a useful feature for presentations with the
Beamer package. In this example I've combined the new PGF/TikZ's overlay feature
with Beamer overlays. Download the PDF version to see the result.

**Note.** This only works with PDFTeX, and you have to run PDFTeX twice.

| Author: Kjell Magne Fauske

\end{comment}


% For every picture that defines or uses external nodes, you'll have to
% apply the 'remember picture' style. To avoid some typing, we'll apply
% the style to all pictures.
\tikzstyle{every picture}+=[remember picture]

% By default all math in TikZ nodes are set in inline mode. Change this to
% displaystyle so that we don't get small fractions.
\everymath{\displaystyle}

\begin{frame}
 \titlepage
\end{frame}

\begin{frame}{Overview}
 \tableofcontents
\end{frame}

\section{Introduction}

\begin{frame}{TSS Prediction}
 
\end{frame}

\begin{frame}{Technical Specs}
 
\end{frame}

\section{Workflow}
\begin{frame}{Overview}
 \tableofcontents[currentsection]
\end{frame}

\begin{frame}{Workflow Structure}
  \centering
  \begin{tikzpicture}[node distance=1.5cm,
    every node/.style={fill=white, font=\sffamily}, align=center]
    %% Specification of nodes (position, etc.)

    \begin{pgfonlayer}{main}
    \node (input)         [process] {Input data};
    \node (mapper)        [processNextflow, below of=input, xshift=-4cm]  {Mapper (BWA)};
    \node (mapper1)       [processNextflow, below of=input, xshift=4cm]  {Mapper (BWA)};
    \node (mapping1)      [process, below of = mapper ]          {Mapped Reads Normal};
    \node (mapping2)      [process, below of = mapper1]   {Mapped Reads Enriched};

    \node (samtools)       [processNextflow, below of = mapping1, yshift=0cm]  {Samtools};
    \node (samtools1)       [processNextflow, below of = mapping2, yshift=0cm]  {Samtools};

    \node (samtools2)      [process, below of = samtools, xshift=-2cm]   {Mapped Normal `+'};
    \node (samtools3)      [process, below of = samtools, xshift=2cm]  {Mapped Normal `-'};
    \node (samtools4)      [process, below of = samtools1, xshift=-2cm]  {Mapped Enr.`+' };
    \node (samtools5)      [process, below of = samtools1, xshift =2cm]  {Mapped Enr.`-'};

    \node (tsstools)       [processNextflow, below of = samtools2]  {TssTools};
    \node (tsstools1)      [processNextflow, below of = samtools3]  {TssTools};
    \node (tsstools2)       [processNextflow, below of = samtools4]  {TssTools};
    \node (tsstools3)      [processNextflow, below of = samtools5]  {TssTools};

    \node (tsstools4)      [process, below of = tsstools]  {Normal `+' WIG};
    \node (tsstools5)      [process, below of = tsstools1]  {Normal `-' WIG};
    \node (tsstools6)      [process, below of = tsstools2] {Enriched `+' WIG};
    \node (tsstools7)      [process, below of = tsstools3] {Enriched `-' WIG};

    \node (tsspredator)    [processNextflowLong, below of = input, yshift = -9cm]  {TssPredator};
    \node (output)         [process, below of= tsspredator] {Output};


    
    %% Specification of lines between nodes specified above
    %% with aditional nodes for description 
    \draw[->]      (input) -- (mapper);
    \draw[->]      (input) -- (mapper1);
    \draw[->]      (mapper) -- (mapping1);
    \draw[->]     (mapper1) -- (mapping2);
    \draw[->]      (mapping1) -- (samtools);
    \draw[->]     (mapping2) -- (samtools1);
    \draw[->]      (samtools) -- (samtools2);
    \draw[->]      (samtools) -- (samtools3);
    \draw[->]     (samtools1) -- (samtools4);
    \draw[->]      (samtools1) -- (samtools5);

    \draw[->]     (samtools2) -- (tsstools);
    \draw[->]      (samtools3) -- (tsstools1);
    \draw[->]     (samtools4) -- (tsstools2);
    \draw[->]      (samtools5) -- (tsstools3);

    \draw[->]      (tsstools) -- (tsstools4);
    \draw[->]      (tsstools1) -- (tsstools5);
    \draw[->]      (tsstools2) -- (tsstools6);
    \draw[->]      (tsstools3) -- (tsstools7);

    \draw[->]      (tsstools4) -- (tsspredator);
    \draw[->]      (tsstools5) -- (tsspredator);
    \draw[->]      (tsstools6) -- (tsspredator);
    \draw[->]      (tsstools7) -- (tsspredator);

    \draw[->]      (tsspredator) -- (output);
    \end{pgfonlayer}

    \begin{pgfonlayer}{background}
    \node (workflow) [activityRuns, fit = (input) (mapper) (mapping1) (mapping2) (samtools) (samtools1) (samtools2)(samtools3) (tsstools) (tsstools1) (tsstools2) (tsstools3) (tsstools4) (tsstools5) (tsspredator) (output)] {};
    \end{pgfonlayer}

  \end{tikzpicture}
\end{frame}

\section{Outlook}
\begin{frame}{Overview}
 \tableofcontents[currentsection]
\end{frame}

\begin{frame}{Future Improvements}
 \begin{itemize}
  \item New Docker Modules
  \item Cloud Integration
  \item Fun, Fun, and more Fun
 \end{itemize}
\end{frame}

\begin{frame}[allowframebreaks]{References}
 \bibliographystyle{apalike}
 \bibliography{../paper/mylit.bib}
\end{frame}

% \begin{frame}
% \frametitle{Rigid body dynamics}
% 
% \tikzstyle{na} = [baseline=-.5ex]
% 
% \begin{itemize}[<+-| alert@+>]
%     \item Coriolis acceleration
%         \tikz[na] \node[coordinate] (n1) {};
% \end{itemize}
% 
% % Below we mix an ordinary equation with TikZ nodes. Note that we have to
% % adjust the baseline of the nodes to get proper alignment with the rest of
% % the equation.
% \begin{equation*}
% \vec{a}_p = \vec{a}_o+\frac{{}^bd^2}{dt^2}\vec{r} +
%         \tikz[baseline]{
%             \node[fill=blue!20,anchor=base] (t1)
%             {$ 2\vec{\omega}_{ib}\times\frac{{}^bd}{dt}\vec{r}$};
%         } +
%         \tikz[baseline]{
%             \node[fill=red!20, ellipse,anchor=base] (t2)
%             {$\vec{\alpha}_{ib}\times\vec{r}$};
%         } +
%         \tikz[baseline]{
%             \node[fill=green!20,anchor=base] (t3)
%             {$\vec{\omega}_{ib}\times(\vec{\omega}_{ib}\times\vec{r})$};
%         }
% \end{equation*}
% 
% \begin{itemize}[<+-| alert@+>]
%     \item Transversal acceleration
%         \tikz[na]\node [coordinate] (n2) {};
%     \item Centripetal acceleration
%         \tikz[na]\node [coordinate] (n3) {};
% \end{itemize}
% 
% % Now it's time to draw some edges between the global nodes. Note that we
% % have to apply the 'overlay' style.
% \begin{tikzpicture}[overlay]
%         \path[->]<1-> (n1) edge [bend left] (t1);
%         \path[->]<2-> (n2) edge [bend right] (t2);
%         \path[->]<3-> (n3) edge [out=0, in=-90] (t3);
% \end{tikzpicture}
% \end{frame}
\end{document}